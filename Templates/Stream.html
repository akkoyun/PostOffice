<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Device Data Stream</title>
    <!-- Google Fonts Nunito -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap">
    <style>
        /* Apply Nunito Font */
        body {
            font-family: 'Nunito', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            background-color: #f9fafb; /* Set background color for entire page */
            height: 100vh; /* Full viewport height */
            display: flex;
            justify-content: center;
            align-items: center; /* Center the main container */
            padding: 20px;
        }

        /* Main Container Styles */
        .main-container {
            display: grid;
            grid-template-columns: 1fr 1fr; /* Create two equal columns */
            gap: 20px; /* Space between the two cards */
            width: 100%;
            max-width: 1600px; /* Adjust max width to fit two cards side by side */
            height: 90vh; /* Set container height to 90% of the viewport height */
        }

        /* Card Styles */
        .card, .json-card {
            background-color: #fff;
            border-radius: 16px;
            box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.06), 0px 1px 3px rgba(0, 0, 0, 0.1);
            padding: 16px;
            display: flex;
            flex-direction: column;
            overflow: auto; /* Add scroll if content overflows */
            height: 90%; /* Make card take full height of the container */
        }

        .json-card pre {
            font-size: 15px; /* Increase the font size by 1 unit (originally 14px, changed to 16px) */
        }

        /* Table Styles */
        .data-table {
            width: 100%;
            border-collapse: collapse; /* Remove gaps between table cells */
            margin-top: 20px;
            table-layout: fixed; /* Fix table layout */
        }
        .data-table th, .data-table td {
            padding: 10px; /* Adjust padding to provide a better layout */
            text-align: center; /* Center align table text */
            border-top: 1px solid #e5e7eb; /* Add border to top */
            border-bottom: none; /* Remove bottom border */
            cursor: pointer; /* Indicate clickable rows */
            font-size: 14px; /* Increase font size by 1 unit */
        }
        .data-table th {
            background-color: #f9fafb; /* Match header background to card */
            color: #6b7280;
            font-weight: 600;
            border-top: none; /* Remove top border for header */
            border-bottom: 1px solid #e5e7eb; /* Add bottom border to header */
        }
        .data-table th {
            font-size: 15px; /* Increase the font size by 1 unit (originally 14px, changed to 15px) */
            font-weight: bold; /* Make the header text bold */
        }

        .data-table td {
            background-color: #fff;
        }
        .data-table tbody tr:nth-child(even) td {
            background-color: #f9fafb; /* Zebra striping for better readability */
        }
        .data-table th, .data-table td {
            border-right: 1px solid #e5e7eb; /* Add right border */
        }
        .data-table th:last-child, .data-table td:last-child {
            border-right: none; /* Remove right border for the last cell */
        }
        .data-table tbody tr:hover td {
            background-color: #e5f4ff; /* Change background color on hover */
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="card">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Device Serial ID</th>
                        <th>Stream Time Stamp</th>
                        <th>Device IP</th>
                    </tr>
                </thead>
                <tbody>
                    <tr data-json='jsonData1'>
                        <td>A20000011D13BD70</td>
                        <td>2024-03-20 14:40:49</td>
                        <td>192.168.1.1</td>
                    </tr>
                    <tr data-json='jsonData2'>
                        <td>A20000011D13BD71</td>
                        <td>2024-03-21 10:30:21</td>
                        <td>192.168.1.2</td>
                    </tr>
                    <tr data-json='jsonData3'>
                        <td>A20000011D13BD72</td>
                        <td>2024-03-22 08:20:18</td>
                        <td>192.168.1.3</td>
                    </tr>
                    <tr data-json='jsonData4'>
                        <td>A20000011D13BD73</td>
                        <td>2024-03-23 09:50:35</td>
                        <td>192.168.1.4</td>
                    </tr>
                    <tr data-json='jsonData5'>
                        <td>A20000011D13BD74</td>
                        <td>2024-03-24 12:15:42</td>
                        <td>192.168.1.5</td>
                    </tr>
                    <tr data-json='jsonData6'>
                        <td>A20000011D13BD75</td>
                        <td>2024-03-25 11:30:50</td>
                        <td>192.168.1.6</td>
                    </tr>
                    <tr data-json='jsonData7'>
                        <td>A20000011D13BD76</td>
                        <td>2024-03-26 07:40:10</td>
                        <td>192.168.1.7</td>
                    </tr>
                    <tr data-json='jsonData8'>
                        <td>A20000011D13BD77</td>
                        <td>2024-03-27 05:55:05</td>
                        <td>192.168.1.8</td>
                    </tr>
                    <tr data-json='jsonData9'>
                        <td>A20000011D13BD78</td>
                        <td>2024-03-28 02:45:55</td>
                        <td>192.168.1.9</td>
                    </tr>
                    <tr data-json='jsonData10'>
                        <td>A20000011D13BD79</td>
                        <td>2024-03-29 14:20:20</td>
                        <td>192.168.1.10</td>
                    </tr>
                    <tr data-json='jsonData6'>
                        <td>A20000011D13BD75</td>
                        <td>2024-03-25 11:30:50</td>
                        <td>192.168.1.6</td>
                    </tr>
                    <tr data-json='jsonData7'>
                        <td>A20000011D13BD76</td>
                        <td>2024-03-26 07:40:10</td>
                        <td>192.168.1.7</td>
                    </tr>
                    <tr data-json='jsonData8'>
                        <td>A20000011D13BD77</td>
                        <td>2024-03-27 05:55:05</td>
                        <td>192.168.1.8</td>
                    </tr>
                    <tr data-json='jsonData9'>
                        <td>A20000011D13BD78</td>
                        <td>2024-03-28 02:45:55</td>
                        <td>192.168.1.9</td>
                    </tr>
                    <tr data-json='jsonData10'>
                        <td>A20000011D13BD79</td>
                        <td>2024-03-29 14:20:20</td>
                        <td>192.168.1.10</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="json-card">
            <pre>No data selected</pre> <!-- Initial state with no data -->
        </div>
    </div>

    <script>
        // JSON data for each row
        const jsonData1 = {
            "Info": {
                "Command": "Timed",
                "TimeStamp": "2024-03-20 14:40:49",
                "ID": "C50000011D05A970",
                "Firmware": "04.00.20"
            },
            "Device": {
                "Power": {
                    "B_IV": 4.16,
                    "B_AC": 0.47,
                    "B_IC": 1600,
                    "B_FC": 1500,
                    "B_SOC": 99.00,
                    "B_T": 24.50,
                    "B_CS": 3
                },
                "IoT": {
                    "Firmware": "25.30.226",
                    "IMEI": "354485417649444",
                    "ICCID": "8990011936290169339",
                    "RSSI": 66,
                    "WDS": 3,
                    "ConnTime": 3.724,
                    "MCC": 286,
                    "MNC": 1,
                    "TAC": 8770,
                    "CELLID": 53541
                }
            },
            "Payload": {
                "PCB_T": 25.13,
                "VRMS_R": 222.92,
                "VRMS_S": 222.82,
                "VRMS_T": 222.93
            }
        };

        const jsonData2 = {
            "Info": {
                "Command": "Periodic",
                "TimeStamp": "2024-03-21 10:30:21",
                "ID": "C50000011D05A971",
                "Firmware": "04.00.21"
            },
            "Device": {
                "Power": {
                    "B_IV": 4.20,
                    "B_AC": 0.50,
                    "B_IC": 1620,
                    "B_FC": 1520,
                    "B_SOC": 98.50,
                    "B_T": 25.00,
                    "B_CS": 4
                },
                "IoT": {
                    "Firmware": "25.30.227",
                    "IMEI": "354485417649445",
                    "ICCID": "8990011936290169340",
                    "RSSI": 68,
                    "WDS": 4,
                    "ConnTime": 3.950,
                    "MCC": 286,
                    "MNC": 1,
                    "TAC": 8771,
                    "CELLID": 53542
                }
            },
            "Payload": {
                "PCB_T": 25.50,
                "VRMS_R": 223.00,
                "VRMS_S": 222.90,
                "VRMS_T": 223.10
            }
        };

        const jsonData3 = {
            "Info": {
                "Command": "Event",
                "TimeStamp": "2024-03-22 08:20:18",
                "ID": "C50000011D05A972",
                "Firmware": "04.00.22"
            },
            "Device": {
                "Power": {
                    "B_IV": 4.22,
                    "B_AC": 0.52,
                    "B_IC": 1650,
                    "B_FC": 1550,
                    "B_SOC": 97.50,
                    "B_T": 25.20,
                    "B_CS": 5
                },
                "IoT": {
                    "Firmware": "25.30.228",
                    "IMEI": "354485417649446",
                    "ICCID": "8990011936290169341",
                    "RSSI": 70,
                    "WDS": 5,
                    "ConnTime": 4.000,
                    "MCC": 286,
                    "MNC": 1,
                    "TAC": 8772,
                    "CELLID": 53543
                }
            },
            "Payload": {
                "PCB_T": 25.70,
                "VRMS_R": 223.20,
                "VRMS_S": 223.00,
                "VRMS_T": 223.30
            }
        };

        const jsonData4 = {
            "Info": {
                "Command": "Status",
                "TimeStamp": "2024-03-23 09:50:35",
                "ID": "C50000011D05A973",
                "Firmware": "04.00.23"
            },
            "Device": {
                "Power": {
                    "B_IV": 4.25,
                    "B_AC": 0.55,
                    "B_IC": 1670,
                    "B_FC": 1570,
                    "B_SOC": 96.50,
                    "B_T": 25.30,
                    "B_CS": 6
                },
                "IoT": {
                    "Firmware": "25.30.229",
                    "IMEI": "354485417649447",
                    "ICCID": "8990011936290169342",
                    "RSSI": 72,
                    "WDS": 6,
                    "ConnTime": 4.150,
                    "MCC": 286,
                    "MNC": 1,
                    "TAC": 8773,
                    "CELLID": 53544
                }
            },
            "Payload": {
                "PCB_T": 25.80,
                "VRMS_R": 223.50,
                "VRMS_S": 223.30,
                "VRMS_T": 223.60
            }
        };

        const jsonData5 = {
            "Info": {
                "Command": "Alert",
                "TimeStamp": "2024-03-24 12:15:42",
                "ID": "C50000011D05A974",
                "Firmware": "04.00.24"
            },
            "Device": {
                "Power": {
                    "B_IV": 4.30,
                    "B_AC": 0.60,
                    "B_IC": 1700,
                    "B_FC": 1600,
                    "B_SOC": 95.50,
                    "B_T": 25.40,
                    "B_CS": 7
                },
                "IoT": {
                    "Firmware": "25.30.230",
                    "IMEI": "354485417649448",
                    "ICCID": "8990011936290169343",
                    "RSSI": 74,
                    "WDS": 7,
                    "ConnTime": 4.300,
                    "MCC": 286,
                    "MNC": 1,
                    "TAC": 8774,
                    "CELLID": 53545
                }
            },
            "Payload": {
                "PCB_T": 26.00,
                "VRMS_R": 223.80,
                "VRMS_S": 223.50,
                "VRMS_T": 223.90
            }
        };

        const jsonData6 = {
            "Info": {
                "Command": "Timed",
                "TimeStamp": "2024-03-25 11:30:50",
                "ID": "C50000011D05A975",
                "Firmware": "04.00.25"
            },
            "Device": {
                "Power": {
                    "B_IV": 4.35,
                    "B_AC": 0.65,
                    "B_IC": 1720,
                    "B_FC": 1620,
                    "B_SOC": 94.50,
                    "B_T": 25.50,
                    "B_CS": 8
                },
                "IoT": {
                    "Firmware": "25.30.231",
                    "IMEI": "354485417649449",
                    "ICCID": "8990011936290169344",
                    "RSSI": 76,
                    "WDS": 8,
                    "ConnTime": 4.450,
                    "MCC": 286,
                    "MNC": 1,
                    "TAC": 8775,
                    "CELLID": 53546
                }
            },
            "Payload": {
                "PCB_T": 26.20,
                "VRMS_R": 224.10,
                "VRMS_S": 223.80,
                "VRMS_T": 224.20
            }
        };

        const jsonData7 = {
            "Info": {
                "Command": "Periodic",
                "TimeStamp": "2024-03-26 07:40:10",
                "ID": "C50000011D05A976",
                "Firmware": "04.00.26"
            },
            "Device": {
                "Power": {
                    "B_IV": 4.40,
                    "B_AC": 0.70,
                    "B_IC": 1740,
                    "B_FC": 1640,
                    "B_SOC": 93.50,
                    "B_T": 25.60,
                    "B_CS": 9
                },
                "IoT": {
                    "Firmware": "25.30.232",
                    "IMEI": "354485417649450",
                    "ICCID": "8990011936290169345",
                    "RSSI": 78,
                    "WDS": 9,
                    "ConnTime": 4.600,
                    "MCC": 286,
                    "MNC": 1,
                    "TAC": 8776,
                    "CELLID": 53547
                }
            },
            "Payload": {
                "PCB_T": 26.40,
                "VRMS_R": 224.40,
                "VRMS_S": 224.10,
                "VRMS_T": 224.50
            }
        };

        const jsonData8 = {"Info": {"Command": "Event","TimeStamp": "2024-03-27 05:55:05","ID": "C50000011D05A977","Firmware": "04.00.27"},"Device": {"Power": {"B_IV": 4.45,"B_AC": 0.75,"B_IC": 1760,"B_FC": 1660,"B_SOC": 92.50,"B_T": 25.70,"B_CS": 10},"IoT": {"Firmware": "25.30.233","IMEI": "354485417649451","ICCID": "8990011936290169346","RSSI": 80,"WDS": 10,"ConnTime": 4.750,"MCC": 286,"MNC": 1,"TAC": 8777,"CELLID": 53548}},"Payload": {"PCB_T": 26.50,"VRMS_R": 224.70,"VRMS_S": 224.40,"VRMS_T": 224.80}};

        const jsonData9 = {
            "Info": {
                "Command": "Status",
                "TimeStamp": "2024-03-28 02:45:55",
                "ID": "C50000011D05A978",
                "Firmware": "04.00.28"
            },
            "Device": {
                "Power": {
                    "B_IV": 4.50,
                    "B_AC": 0.80,
                    "B_IC": 1780,
                    "B_FC": 1680,
                    "B_SOC": 91.50,
                    "B_T": 25.80,
                    "B_CS": 11
                },
                "IoT": {
                    "Firmware": "25.30.234",
                    "IMEI": "354485417649452",
                    "ICCID": "8990011936290169347",
                    "RSSI": 82,
                    "WDS": 11,
                    "ConnTime": 4.900,
                    "MCC": 286,
                    "MNC": 1,
                    "TAC": 8778,
                    "CELLID": 53549
                }
            },
            "Payload": {
                "PCB_T": 26.60,
                "VRMS_R": 225.00,
                "VRMS_S": 224.70,
                "VRMS_T": 225.10
            }
        };

        const jsonData10 = {
            "Info": {
                "Command": "Alert",
                "TimeStamp": "2024-03-29 14:20:20",
                "ID": "C50000011D05A979",
                "Firmware": "04.00.29"
            },
            "Device": {
                "Power": {
                    "B_IV": 4.55,
                    "B_AC": 0.85,
                    "B_IC": 1800,
                    "B_FC": 1700,
                    "B_SOC": 90.50,
                    "B_T": 25.90,
                    "B_CS": 12
                },
                "IoT": {
                    "Firmware": "25.30.235",
                    "IMEI": "354485417649453",
                    "ICCID": "8990011936290169348",
                    "RSSI": 84,
                    "WDS": 12,
                    "ConnTime": 5.050,
                    "MCC": 286,
                    "MNC": 1,
                    "TAC": 8779,
                    "CELLID": 53550
                }
            },
            "Payload": {
                "PCB_T": 26.80,
                "VRMS_R": 225.30,
                "VRMS_S": 225.00,
                "VRMS_T": 225.40
            }
        };

        // Mapping row data-json to actual JSON variables
        const jsonDataMap = {
            jsonData1,
            jsonData2,
            jsonData3,
            jsonData4,
            jsonData5,
            jsonData6,
            jsonData7,
            jsonData8,
            jsonData9,
            jsonData10
        };

        // Select all table rows within the tbody
        const tableRows = document.querySelectorAll('.data-table tbody tr');
        const jsonCard = document.querySelector('.json-card pre');

        // Iterate over each row to add click event listener
        tableRows.forEach(row => {
            row.addEventListener('click', function() {
                // Get the JSON data from the data-json attribute
                const jsonKey = this.getAttribute('data-json');
                const jsonParsed = jsonDataMap[jsonKey];

                // Function to highlight JSON syntax
                function syntaxHighlight(json) {
                    json = JSON.stringify(json, undefined, 2);
                    json = json.replace(/&/g, '&').replace(/</g, '<').replace(/>/g, '>');
                    return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(:)?|\b(true|false|null)\b|\d+)/g, function (match) {
                        var cls = 'number';
                        if (/^"/.test(match)) {
                            if (/:$/.test(match)) {
                                cls = 'key';
                            } else {
                                cls = 'string';
                            }
                        } else if (/true|false/.test(match)) {
                            cls = 'boolean';
                        } else if (/null/.test(match)) {
                            cls = 'null';
                        }
                        return '<span class="' + cls + '">' + match + '</span>';
                    });
                }

                // Update the JSON card with highlighted JSON data
                jsonCard.innerHTML = syntaxHighlight(jsonParsed);
            });
        });
    </script>
    <style>
        /* Add JSON syntax highlighting styles */
        pre .string { color: #d14; }
        pre .number { color: #099; }
        pre .boolean { color: #905; }
        pre .null { color: #c00; }
        pre .key { color: #1a1a1a; font-weight: bold; }
    </style>
</body>
</html>
